<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FORM</title>
    
    <!-- Include Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    
    <link rel="stylesheet" href="styles.css">

    <link rel="stylesheet" href="style.css">
    

</head>
<body>
    <iframe src="header.html" frameborder="0" scrolling="no" width="100%" height="180"></iframe>
    <div class="container">
        <h3 class="text-center mt-4">APPLICATION FOR REGISTRATION OF TRADE UNIONS</h3>
        <h6 class="text-center mt-2">(B-FORM)</h6>    

        <div class="form-instructions-container">

        <form id="dataForm" class="custom-form" action="upload.php" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <br>
                <h6 class="text-center mt-2">FORM</h6>
                <br>
                <label for="name">Name of Trade Union</label>
                <input type="text" class="form-control" name="name" id="name" oninput="checkNameExists()" placeholder="Enter name of trade union" required>
                <div id="nameError" class="text-danger"></div>
             </div>

             <div class="form-group">
                <label for="address">Address:</label>
                <input type="text" class="form-control" name="address" id="address" placeholder="Enter your address" required>
             </div>
            
             <div class="form-group">
                <label for="date">Date of Establishment of Trade Union</label>
                <input type="date" class="form-control" name="date" id="date"  required>
             </div>

            <br> 
            <br>          
            <label for="presidentName" style="background-color: rgb(192, 219, 255); color: rgb(0, 119, 255); padding: 10px 425px 10px 10px; border-radius: 5px;">President</label>
                       

             <div class="form-group">
                <label for="preName">Name</label>
                <input type="text" class="form-control" name="preName" id="preName" placeholder="Enter name of president" required>
             </div>
             <div class="form-group">
                <div class="row">
                    <div class="col">
                        <label for="preNIC">National Identity Card (NIC)</label>
                        <input type="text" class="form-control" name="preNIC" id="preNIC" placeholder="Enter NIC Number" required>
                    </div>
                    <div class="col">
                        <label for="preWhatNum">Whatsapp Number</label>
                        <input type="text" class="form-control" name="preWhatNum" id="preWhatNum" placeholder="Enter Whatsapp Number" required>
                    </div>
                </div>
             </div>
             <div class="form-group">
                <div class="row">
                    <div class="col">
                        <label for="preConNum">Contact Number</label>
                        <input type="text" class="form-control" name="preConNum" id="preConNum" placeholder="Enter Contact Number" required>
                    </div>
                    <div class="col">
                        <label for="preEmail">Email</label>
                        <input type="text" class="form-control" name="preEmail" id="preEmail" placeholder="Enter Email Address" required>
                    </div>
                </div>
            </div>

            <br>
            <br>
            <label for="secretaryName" style="background-color: rgb(192, 219, 255); color: rgb(0, 119, 255); padding: 10px 425px 10px 10px; border-radius: 5px;">Secretary</label>

             <div class="form-group">
                <label for="secName">Name</label>
                <input type="text" class="form-control" name="secName" id="secName" placeholder="Enter name of secretary" required>
             </div>
             <div class="form-group">
                <div class="row">
                    <div class="col">
                        <label for="secNIC">National Identity Card (NIC)</label>
                        <input type="text" class="form-control" name="secNIC" id="secNIC" placeholder="Enter NIC Number" required>
                    </div>
                    <div class="col">
                        <label for="secWhatNum">Whatsapp Number</label>
                        <input type="text" class="form-control" name="secWhatNum" id="secWhatNum" placeholder="Enter Whatsapp Number" required>
                    </div>
                </div>
             </div>
             <div class="form-group">
                <div class="row">
                    <div class="col">
                        <label for="secConNum">Contact Number</label>
                        <input type="text" class="form-control" name="secConNum" id="secConNum" placeholder="Enter Contact Number" required>
                    </div>
                    <div class="col">
                        <label for="secEmail">Email</label>
                        <input type="text" class="form-control" name="secEmail" id="secEmail" placeholder="Enter Email Address" required>
                    </div>
                </div>
            </div>

            <br>
            <br>
            <label for="bForm" style="background-color: rgb(192, 219, 255); color: rgb(0, 119, 255); padding: 10px 387px 10px 10px; border-radius: 5px; white-space: nowrap;">Upload B Form</label>

            <div class="form-group">
                <label for="file">Upload B-Form</label>
                <input type="file" class="form-control-file" name="file" id="file">
            </div>
            
            <br>


            <button type="submit" class="btn btn-primary">Submit</button>
        </form>

        <div class="text-muted instructions">
            <h5>Instructions</h5>
            <ul>
                <li>Enter the name of Trade Union. This name should be unique. Otherwise, the request will be rejected.</li>
                <li>Enter the registered address of the office of the trade union.</li>
                <li>Select the established date of the trade union using the date picker.</li>
            </ul>
            <img src="img/white-btn.webp" alt="White Button" style="width: 250px; height: auto;">
        </div>
        

        </div>
         

    </div>

    <!-- Include Bootstrap JS (optional) -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $("#dataForm").submit(function(e) {
                e.preventDefault(); // Prevent the form from submitting

                var name = $("#name").val();
                var address = $("#address").val();
                var date = $("#date").val();

                var preName = $("#preName").val();
                var preNIC = $("#preNIC").val();
                var preWhatNum = $("#preWhatNum").val();
                var preConNum = $("#preConNum").val();
                var preEmail = $("#preEmail").val();

                var secName = $("#secName").val();
                var secNIC = $("#secNIC").val();
                var secWhatNum = $("#secWhatNum").val();
                var secConNum = $("#secConNum").val();
                var secEmail = $("#secEmail").val();
                

                if (name.trim() === "") {
                    // Display an error message for empty name field
                    $("#nameError").html("Name cannot be empty!");
                    return; // Don't proceed with the submission
                }

                $.ajax({
                    type: "POST",
                    url: "db_connect.php",
                    data: { name: name, address: address, date:date, preName:preName, preNIC:preNIC, preWhatNum:preWhatNum, preConNum:preConNum, preEmail:preEmail, 
                        secName:secName, secNIC:secNIC, secWhatNum:secWhatNum, secConNum:secConNum, secEmail:secEmail },

                    success: function(response) {
                        if (response === "success") {
                            alert("Data inserted successfully!");
                            // You can redirect or perform other actions after success.
                        } else if (response === "exists") {
                            $("#nameError").html("Name already exists!");
                        } else {
                            alert("Error: Data not inserted.");
                        }
                    }
                });
            });
        });

        function checkNameExists() {
            var name = $("#name").val();
            $.ajax({
                type: "POST",
                url: "check_name_exists.php",
                data: { name: name },
                success: function(response) {
                    if (response === "exists") {
                        $("#nameError").html("Name already exists!");
                    } else {
                        $("#nameError").html("");
                    }
                }
            });
        }
    </script>

<iframe src="footer.html" frameborder="0" scrolling="no" width="100%" height="600"></iframe>

</body>
</html>
